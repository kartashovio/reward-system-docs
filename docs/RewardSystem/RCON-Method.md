# Ð¡Ð¿Ð¾ÑÐ¾Ð± Ñ Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ Rcon

## ðŸ“ ÐšÑ€Ð°Ñ‚ÐºÐ¾Ðµ ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ

>Ð­Ñ‚Ð¾ ÑÐ¿Ð¾ÑÐ¾Ð±, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ Minecraft ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð¼, Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÑÑÑŒ Ðº Ð½ÐµÐ¼Ñƒ Ð¿Ð¾ Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ñƒ Rcon Ð¸ Ð¿ÐµÑ€ÐµÐ´Ð°Ð²Ð°Ñ ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒÐ½ÑƒÑŽ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ.

>Ð”Ð»Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ **Ð²ÐµÐ±ÑÐµÑ€Ð²ÐµÑ€** Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ð¼ **php**, Ð° Ñ‚Ð°Ðº-Ð¶Ðµ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ñ‹Ð¹ Ð¿Ð¾Ñ€Ñ‚, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð¼Ð¾Ð³ Ð´Ð¾ÑÑ‚ÑƒÑ‡Ð°Ñ‚ÑŒÑÑ Ð´Ð¾ `Ð²ÐµÐ±ÑÐµÑ€Ð²ÐµÑ€Ð°`.

## ðŸ“ˆ ÐŸÐ»ÑŽÑÑ‹ Ð¸ ÐœÐ¸Ð½ÑƒÑÑ‹

ÐŸÐ»ÑŽÑÑ‹:

- Ð›Ñ‘Ð³Ð¾Ðº Ð² Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ð¸.
- Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ Ð»ÑŽÐ±Ñ‹Ð¼Ð¸ Ð¿Ð»Ð°Ð³Ð¸Ð½Ð°Ð¼Ð¸.

ÐœÐ¸Ð½ÑƒÑÑ‹:

- ÐœÐ¾Ð¶ÐµÑ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð½Ðµ ÑÐ¾ Ð²ÑÐµÐ¼Ð¸ ÑÐ´Ñ€Ð°Ð¼Ð¸.
- Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ ÐŸÐž.

## ðŸ§¾ Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ

- Ð”Ð»Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð²Ð°Ð¼ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ **Ð²ÐµÐ±ÑÐµÑ€Ð²ÐµÑ€** Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ð¼ **php**, Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€ **Nginx** + **php-fpm**.
- ÐžÑ‚ÐºÑ€Ñ‹Ñ‚Ñ‹Ð¹ Ð¿Ð¾Ñ€Ñ‚ Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð¾Ð¼.

## ðŸŽ“ Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°

Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° -
* Ð”Ð»Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð²Ð°Ð¼ Ð½ÑƒÐ¶Ð½Ð¾ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð²ÐµÑ€Ð±ÑÐµÑ€Ð²ÐµÑ€, Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€ [**Nginx**](https://www.nginx.com/) Ð¸ **php-fpm**.
> ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð´Ð»Ñ ÐžÐ¡ ubuntu 20.04:
```sh
sudo apt update
sudo apt install nginx
sudo apt install php8.1-fpm
```
Ð”Ð°Ð»ÐµÐµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑƒÐ±ÐµÐ´Ð¸Ñ‚ÑŒÑÑ, Ñ‡Ñ‚Ð¾ Ð²ÑÑ‘ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ð»Ð¾ÑÑŒ
```sh
sudo systemctl status php8.1-fpm
sudo systemctl status nginx
```
Ð•ÑÐ»Ð¸ Ð² Ð¾Ñ‚Ð²ÐµÑ‚Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ ` Active: active (php-fpm running)` Ð¸  `Active: active (Nginx running)`, Ñ‚Ð¾ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ðº Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐµ Nginx Ð²ÐµÐ±ÑÐµÑ€Ð²ÐµÑ€Ð°.
Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ
```sh
sudo nano /etc/nginx/sites-available/rewards.conf
```
Ð’ÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼ Ñ‚ÑƒÐ´Ð° Ð¸ Ð·Ð°Ð¼ÐµÐ½ÑÐµÐ¼ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ `listen 30330;` Ð¸ `root /var/www/html;` Ð½Ð° Ð½ÑƒÐ¶Ð½Ñ‹Ðµ, Ð¸Ð»Ð¸ Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼ ÐºÐ°Ðº ÐµÑÑ‚ÑŒ.
```conf
server {
    listen 30330;
    root /var/www/html;
    server_name _;
    location ~ \.php$ {
        include snippets/fastcgi-php.conf;
        fastcgi_pass unix:/run/php/php8.1-fpm.sock;
    }
}
```
Ð”Ð°Ð»ÐµÐµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹
```sh
ln /etc/nginx/sites-available/rewards.conf /etc/nginx/sites-enabled/rewards.conf
sudo systemctl restart php8.1-fpm
sudo systemctl restart nginx
```
Ð’ÑÑ‘, Ð²ÐµÐ± ÑÐµÑ€Ð²ÐµÑ€ Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¾Ð¹ PHP ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½. Ð”Ð°Ð»ÐµÐµ Ð½ÑƒÐ¶Ð½Ð¾ Ð¾Ñ‚ÐºÑ€Ñ‚ÑŒ Ð¿Ð¾Ñ€Ñ‚, ÐµÑÐ»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚Ðµ **UFW**, Ñ‚Ð¾ ÑÑ‚Ð¾ Ð¼Ð¾Ð¶Ð½Ð¾ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ `sudo ufw allow in 30330/tcp` (Ñ‚ÑƒÑ‚ Ð½ÑƒÐ¶Ð½Ð¾ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¿Ð¾Ñ€Ñ‚ ÐºÐ°Ðº Ð² ÐºÐ¾Ð½Ñ„Ð¸Ð³Ðµ Nginx).
Ð ÐµÑÐ»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚Ðµ IPTables, Ñ‚Ð¾ Ð¿Ð¾Ñ€Ñ‚ Ð¾Ñ‚ÐºÑ€Ñ‚ÑŒ Ð¼Ð¾Ð¶Ð½Ð¾ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð¾Ð¹ `sudo iptables -t filter -A INPUT -p tcp --dport 30330 -j ACCEPT` (Ñ‚ÑƒÑ‚ Ð½ÑƒÐ¶Ð½Ð¾ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¿Ð¾Ñ€Ñ‚ ÐºÐ°Ðº Ð² ÐºÐ¾Ð½Ñ„Ð¸Ð³Ðµ Nginx).

## âš™ï¸ ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¹

>todo